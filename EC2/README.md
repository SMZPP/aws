Amazon EC2（Elastic Compute Cloud）は、AWSが提供する仮想サーバーのサービスで、オンデマンドでインスタンス（仮想マシン）を作成・管理できることが特徴です。以下に、EC2の仕組み、種類、設定、コスト管理といった詳細なポイントを解説します。

### 1. EC2の基本概念

* インスタンス
  EC2の基本単位で、仮想マシンそのものです。ユーザーは必要に応じてインスタンスを起動、停止、終了できます。

* [AMI (Amazon Machine Image)](./AMI.md)

  OSやアプリケーションがプリインストールされたテンプレートです。

  AMIを元にインスタンスを起動し、OSやミドルウェア、アプリケーションのインストールが自動的に行われます。

* インスタンスタイプ
  インスタンスの性能や用途を決める設定で、用途に応じてCPUやメモリの量が異なる数十種類があります。


### 2. [インスタンスタイプ](./INSTANCE_TYPE.md)の種類

EC2インスタンスは目的別に最適化された以下のタイプに分類されます。

* **汎用（General Purpose）**
  t3やm6gなど、バランスの取れた性能で、テスト、開発、Webサーバーに適します。

* **コンピューティング最適化（Compute Optimized）**
  c6gなど、CPU性能を重視した構成。データ解析や高負荷なアプリケーションに適しています。

* **メモリ最適化（Memory Optimized）**
  r6gやx2gdなど、大量のメモリが必要なデータベースやインメモリキャッシュに適しています。

* **ストレージ最適化（Storage Optimized）**
  i3やd2など、高いI/O性能が必要な大規模データ処理やデータウェアハウスに適しています。

* **高速コンピューティング（Accelerated Computing）**
  GPU（p4d）やFPGA（f1）を搭載し、機械学習やデータ解析に対応します。

### 3. [EC2インスタンスのライフサイクル](./LIFECYCLE.md)
* **起動（Start）**
  AMIからインスタンスを作成し、起動します。

* **停止（Stop）**
  インスタンスの実行を一時的に停止し、必要に応じて再起動できます。

* **終了（Terminate）**
  インスタンスを完全に削除し、再利用できない状態にします。

### 4. [EC2インスタンスの料金モデル](./PRICING_MODELS.md)
* **オンデマンドインスタンス**
  必要なときにインスタンスを作成し、使った分だけ料金を払います。柔軟性が高いですが、長期間の使用では割高になります。

* **リザーブドインスタンス**
  1年または3年の長期間契約で、オンデマンドに比べて割引が適用されるモデル。長期的な利用に向いています。

* **スポットインスタンス**
  AWSの余剰リソースを利用する低価格のオプションですが、利用中のインスタンスが停止する可能性があります。バッチ処理やデータ解析など、中断可能なジョブに向いています。

* **Savings Plans**
  Compute Savings PlanやEC2 Instance Savings Planがあり、使用量に応じた割引が受けられます。

### 5. [EC2ストレージオプション](./STORAGE.md)
* **EBS (Elastic Block Store)**
  高性能ブロックストレージで、データを永続的に保存できます。スナップショット機能を使ってバックアップが可能です。

* **インスタンスストア**
  一時的なストレージとして提供されるもので、インスタンスが終了するとデータが失われます。

* **EFS (Elastic File System)**
  複数インスタンスからアクセスできるファイルシステムで、共有ストレージとして便利です。

### 6. ネットワークとセキュリティ
* **VPC (Virtual Private Cloud)**
  EC2インスタンスを配置する仮想ネットワークで、インスタンスへのアクセスを制御できます。

* **セキュリティグループ**
  ファイアウォール設定で、ポートの開放やアクセス許可などを設定し、インスタンスのセキュリティを管理します。

* **IAM (Identity and Access Management)**
  アクセス権限を管理するための仕組みで、特定のアクションを許可・拒否するポリシーを設定できます。

### 7. 自動化とスケーリング
* **Auto Scaling**
  需要に応じてインスタンスの数を自動で増減させるサービスです。負荷の増減に応じてサーバーを柔軟にスケーリングできるため、コストの最適化とパフォーマンスの安定化が図れます。

* **Elastic Load Balancing（ELB）**
  トラフィックを複数のインスタンスに分散させることで、負荷を平準化し、アプリケーションの可用性を高めます。

### 8. コスト管理のポイント
* **Trusted Advisor**
  AWSのコスト最適化アドバイザーで、コスト削減の提案を提供します。

* **CloudWatch**
  メトリクスを監視し、使用状況を把握することで、不要なインスタンスの停止や最適化が可能です。

* **料金アラート**
  一定のコストを超えた時に通知を受け取ることで、無駄な利用を防げます。

## 試験対策のポイント
EC2のインスタンスタイプや用途別の適切な選択肢、料金モデルの違いについて理解することが重要です。
Auto ScalingやELBの役割と設定方法もよく出題されます。
IAMやセキュリティグループによるアクセス制御も頻出分野で、適切なアクセス権限の設定についての理解が求められます。
